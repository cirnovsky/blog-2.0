<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Solution Set -「LOC 4326」 | 汪站</title>
    <link rel="stylesheet" href="../output.css" />
  </head>
  <body>
    <script>
      MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
        },
      };
    </script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <h1>Solution Set -「LOC 4326」</h1><p><a href="http://222.180.160.110:1024/contest/4326">Link.</a></p>
<h3>A. 路径 (path)</h3>
<p>设 $f_u$ 表示到 $u$ 时凑出的路径节点个数. 以拓扑序转移即可.</p>
<h3>B. 异或 (xor)</h3>
<p>先差分, 将区间操作转化为双点 (或单点) 操作. 把双点操作抽象成连边, 每个连通块的步数下界是连通块大小减一, 上界是连通块大小.</p>
<blockquote>
<p><strong>结论</strong>: 取得下界当且仅当连通块异或和为零.</p>
<p><strong>证明</strong>:</p>
<ul>
<li>必要性: 因为是一个连通块, 又只进行了大小减一次操作, 因此每次操作都是双点. 因此连通块异或和不变, 因此连通块异或和是 $0$;</li>
<li>充分性: 当连通块异或和为 $0$, 设最后一个元素为 $x$, 则前面元素的异或和也为 $x$, 每次操作选择一个未被选择过的非最后一个元素的元素, 令其与最后一个元素均异或其, 操作次数为连通块大小减一.</li>
</ul>
</blockquote>
<p>答案即为 $n$ 减去最大的异或和为零的子序列划分数. 状压即可.</p>
<h3>C. 距离 (distance)</h3>
<p>我甚至没学过点分树...</p>
<p>考虑单点. 建出点分树, 令 $d(x, y)$ 表示原树上 $x, y$ 的距离, $f(p)$ 表示目前已经插入点集且在点分树中 $p$ 的子树里的点中, 距离 $p$ 最近的点. 那么对于一个询问 $a$, 枚举 $a$ 和 $a$ 在点分树上的祖先 $p$, 答案就是 $d(a, p) + \min(f(p))$, 注意我们不需要排除 $a$ 本身在的这棵子树, 因为 $p$ 是 $a$ 和 $x$ 的 LCA 的祖先, 若 $x$ 和 $a$ 在 $p$ 的同一棵子树里, 答案一定更劣.</p>
<p>再考虑点对. 对于一个询问 $(a, b)$, 把路径拆成 $x \rightarrow p \rightarrow a$ 和 $y \rightarrow q \rightarrow b$. 设 $f(p, q)$ 表示与 $f(p)$ 类似的含义, 预处理出来我们就可以回答询问了. 但是 $\mathcal O(n^2)$ 的空间并不能承受, 于是把询问挂载在 $a$ 到根的路径上, 求 $f_p(q)$ 即可.</p>
<p>说着简单, 代码还是有点难度的, 尤其我对点分树完全不熟悉...</p>
<h3>D. 花之舞 (dance)</h3>
<p>不会.</p>
<hr>
<blockquote>
<p>/ 即使我们分隔　在遥远的两端 /</p>
<p>/ 我会始终凝望　你存在的方向 /</p>
<p>/ 很感谢你曾经赋予给我的最特殊的意义 /</p>
<p>/ 为我描画翅膀　去向蔚蓝之上 /</p>
<p>/ 闪烁最动人的星光 /</p>
<p>—— <a href="https://vocadb.net/S/346475">Evalia - <em>星辰</em> ft. 星尘</a></p>
</blockquote>

    <script src="../components/layout.js"></script>
  </body>
</html>
